(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["message"],{"0b4d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"message"}},[t._m(0),t._m(1),a("div",{staticClass:"comment-text layui-form"},[a("div",{attrs:{id:"comments"}},[a("div",{staticClass:"respond",attrs:{id:"respond-page-14"}},[t._m(2),t._m(3),a("br"),a("form",{attrs:{method:"post",id:"comment-form",role:"form"}},[a("div",{staticClass:"layui-form-item"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.content,expression:"comment.content"}],staticClass:"layui-textarea",attrs:{rows:"5",cols:"30",name:"text",id:"textarea",placeholder:"嘿~ 大神，别默默的看了，快来点评一下吧",required:""},domProps:{value:t.comment.content},on:{input:function(e){e.target.composing||t.$set(t.comment,"content",e.target.value)}}})]),a("div",{staticClass:"layui-form-item layui-row layui-col-space5"},[a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.name,expression:"comment.name"}],staticClass:"layui-input",attrs:{type:"text",name:"author",id:"author",placeholder:"* 怎么称呼",required:""},domProps:{value:t.comment.name},on:{input:function(e){e.target.composing||t.$set(t.comment,"name",e.target.value)}}})]),a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.email,expression:"comment.email"}],staticClass:"layui-input",attrs:{type:"email",name:"mail",id:"mail","lay-verify":"email",placeholder:"* 邮箱(放心~会保密~.~)",required:""},domProps:{value:t.comment.email},on:{input:function(e){e.target.composing||t.$set(t.comment,"email",e.target.value)}}})]),a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.website,expression:"comment.website"}],staticClass:"layui-input",attrs:{type:"url",name:"url",id:"url","lay-verify":"url",placeholder:"http://您的主页"},domProps:{value:t.comment.website},on:{input:function(e){e.target.composing||t.$set(t.comment,"website",e.target.value)}}})])]),a("div",{staticClass:"layui-inline"},[a("button",{staticClass:"layui-btn layui-btn-normal",on:{click:function(e){return e.preventDefault(),t.post()}}},[t._v("提交评论")])]),a("input",{attrs:{type:"hidden",name:"_",value:"b4e59c207cd06785ae2323dacb00bfb5"}})])]),a("div",{attrs:{id:"comment-form-place-holder"}}),a("br"),a("h3",{},[t._v("已有 "+t._s(t.comment_list.length)+" 条评论")]),a("br"),a("div",{staticClass:"pinglun"},[a("ol",{staticClass:"comment-list"},t._l(t.comment_list,(function(e){return a("li",{key:e.pk,staticClass:"comment-body comment-parent comment-odd"},[a("div",{staticClass:"pl-dan comment-txt-box"},[a("div",{staticClass:"t-p comment-author"},[a("img",{staticClass:"avatar",attrs:{src:t.imageBaseUrl+"/static/img/commenter.jpeg",alt:"wyzblog",width:"40",height:"40"}})]),a("div",{staticClass:"t-u comment-author"},[a("strong",[a("a",{attrs:{href:e.website,rel:"external nofollow"},domProps:{textContent:t._s(e.name)}}),t._v(" "),a("span",{staticClass:"layui-badge"})]),t._m(4,!0),a("div",{staticClass:"t-s"},[a("p"),a("p",{domProps:{textContent:t._s(e.content)}}),a("p")]),a("span",{staticClass:"t-btn"},[a("span",{staticClass:"t-g"},[t._v(t._s(t._f("dateTimeFormat")(e.time)))])])])])])})),0)])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-article text-center"},[a("h1",[t._v("留言")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text",attrs:{itemprop:"articleBody"}},[a("div",{staticClass:"md_content markdown-body editormd-html-preview",staticStyle:{"min-height":"50px"},attrs:{id:"md_content_2"}},[a("p",[t._v("有什么想对我说的么？")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cancel-comment-reply"},[a("a",{staticStyle:{display:"none"},attrs:{id:"cancel-comment-reply-link",href:"#",rel:"nofollow"}},[t._v("取消回复")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"response"}},[a("i",{staticClass:"layui-icon"},[t._v("")]),t._v(" 评论啦~")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b")])}],s=(a("b0c0"),a("1ae0")),o=a("d019"),m=a.n(o),l={name:"message",data:function(){return{comment_list:[],comment:{blog_id:0,name:"",content:"",website:"",email:""},imageBaseUrl:m.a.imageBaseUrl}},mounted:function(){var t=this;Object(s["a"])({url:"/api/comment/",method:"get",params:{blog_id:0}}).then((function(e){t.comment_list=e.data})).catch((function(t){console.log("message error"),console.dir(t)}))},activated:function(){this.bus.$emit("ChangeActive","message"),this.bus.$emit("ChangeBreadcrumb",["留言板"])},methods:{post:function(){if(!this.comment.content||!this.comment.name||!this.comment.email||!this.comment.website)return window.layui.layer.alert("所有表单都不能为空!",{icon:2}),!1;var t=/^[0-9a-zA-Z_.-]+[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+){1,2}$/;if(!t.test(this.comment.email))return window.layui.layer.alert("邮箱格式不正确！",{icon:2}),!1;var e=/^(https|http):\/\//;if(!e.test(this.comment.website))return window.layui.layer.alert("网站格式不正确！",{icon:2}),!1;var a=window.layui.layer.load(2);Object(s["a"])({url:"/api/comment/",method:"post",data:this.comment}).then((function(t){window.layui.layer.alert("评论成功!",{icon:1},(function(){location.reload()})),console.log(t)})).catch((function(t){console.log("message error"),console.dir(t)})),window.layui.layer.close(a)}}},c=l,r=a("2877"),u=Object(r["a"])(c,i,n,!1,null,null,null);e["default"]=u.exports},b0c0:function(t,e,a){var i=a("83ab"),n=a("9bf2").f,s=Function.prototype,o=s.toString,m=/^\s*function ([^ (]*)/,l="name";!i||l in s||n(s,l,{configurable:!0,get:function(){try{return o.call(this).match(m)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=message.aa529610.js.map