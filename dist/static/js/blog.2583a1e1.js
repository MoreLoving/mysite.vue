(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["blog"],{"68b7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"blog"}},[a("div",{staticClass:"title-article"},[a("h1",{domProps:{textContent:t._s(t.blog.title)}}),a("div",{staticClass:"title-msg"},[t._m(0),a("span",{},[a("i",{staticClass:"layui-icon"},[t._v("")]),t._v(" "+t._s(t._f("dateTimeFormat2")(t.blog.created_time))+" ")]),a("span",{},[a("i",{staticClass:"layui-icon"},[t._v("")]),t._v(" "+t._s(t.blog.view_num)+"℃")]),a("span",{},[a("i",{staticClass:"layui-icon"},[t._v("")]),t._v(" "+t._s(t.blog.comment_num)+"条")])])]),a("div",{staticClass:"text",attrs:{itemprop:"articleBody"}},[a("mavon-editor",{attrs:{defaultOpen:"preview",editable:!1,toolbarsFlag:!1,value:t.blog.content,subfield:!1}})],1),a("div",{staticClass:"tags-text"},[a("i",{staticClass:"layui-icon"},[t._v("")]),t._v("标签: "),t._l(t.blog.tags,(function(e){return a("a",{key:e.id,attrs:{href:"#"},domProps:{textContent:t._s(e.name+" ")}})}))],2),a("div",{staticClass:"page-text"},[a("div",[a("span",{staticClass:"layui-badge layui-bg-gray"},[t._v("上一篇")]),t.hasPrevious?a("router-link",{attrs:{to:{name:"blog",params:{id:t.blog.previous_post.id}},title:t.blog.previous_post.title},domProps:{textContent:t._s(t.blog.previous_post.title)}}):a("span",[t._v("没有了")])],1),a("div",[a("span",{staticClass:"layui-badge layui-bg-gray"},[t._v("下一篇")]),t.hasNext?a("router-link",{attrs:{to:{name:"blog",params:{id:t.blog.next_post.id}},title:t.blog.next_post.title},domProps:{textContent:t._s(t.blog.next_post.title)}}):a("span",[t._v("没有了")])],1)]),a("div",{staticClass:"comment-text layui-form"},[a("div",{attrs:{id:"comments"}},[a("div",{staticClass:"respond"},[t._m(1),a("br"),a("form",{attrs:{method:"post",id:"comment-form",role:"form"}},[a("div",{staticClass:"layui-form-item"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.content,expression:"comment.content"}],staticClass:"layui-textarea",attrs:{rows:"5",cols:"30",name:"text",id:"textarea",placeholder:"嘿~ 大神，别默默的看了，快来点评一下吧",required:""},domProps:{value:t.comment.content},on:{input:function(e){e.target.composing||t.$set(t.comment,"content",e.target.value)}}})]),a("div",{staticClass:"layui-form-item layui-row layui-col-space5"},[a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.name,expression:"comment.name"}],staticClass:"layui-input",attrs:{type:"text",name:"author",id:"author",placeholder:"* 怎么称呼",required:""},domProps:{value:t.comment.name},on:{input:function(e){e.target.composing||t.$set(t.comment,"name",e.target.value)}}})]),a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.email,expression:"comment.email"}],staticClass:"layui-input",attrs:{type:"email",name:"mail",id:"mail","lay-verify":"email",placeholder:"* 邮箱(放心~会保密~.~)",required:""},domProps:{value:t.comment.email},on:{input:function(e){e.target.composing||t.$set(t.comment,"email",e.target.value)}}})]),a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.website,expression:"comment.website"}],staticClass:"layui-input",attrs:{type:"url",name:"url",id:"url","lay-verify":"url",placeholder:"http://您的主页"},domProps:{value:t.comment.website},on:{input:function(e){e.target.composing||t.$set(t.comment,"website",e.target.value)}}})])]),a("div",{staticClass:"layui-inline"},[a("button",{staticClass:"layui-btn layui-btn-normal",on:{click:function(e){return e.preventDefault(),t.post(0)}}},[t._v("提交评论")])])])]),a("div",{attrs:{id:"comment-form-place-holder"}}),a("br"),a("h3",{},[t._v("已有 "+t._s(t.blog.comments.length)+" 条评论")]),a("br"),a("div",{staticClass:"pinglun"},[a("ol",{staticClass:"comment-list"},t._l(t.blog.comments,(function(e){return a("li",{key:e.pk,staticClass:"comment-body comment-parent comment-odd"},[a("div",{staticClass:"pl-dan comment-txt-box"},[t._m(2,!0),a("div",{staticClass:"t-u comment-author"},[a("strong",[a("a",{attrs:{href:e.website,rel:"external nofollow"},domProps:{textContent:t._s(e.name)}}),t._v(" "),a("span",{staticClass:"layui-badge"})]),t._m(3,!0),a("div",{staticClass:"t-s"},[a("p"),a("p",{domProps:{textContent:t._s(e.content)}}),a("p")]),a("span",{staticClass:"t-btn"},[a("a",{attrs:{href:"",rel:"nofollow"},on:{click:function(a){a.preventDefault(),t.reply_show=e.pk}}},[t._v("回复")]),t._v(" "),a("span",{staticClass:"t-g"},[t._v(t._s(t._f("dateTimeFormat")(e.time)))])])])]),a("form",{style:t.reply_show==e.pk?"":"display:none",attrs:{method:"post",id:"comment-form",role:"form"}},[t._m(4,!0),a("br"),a("div",{staticClass:"cancel-comment-reply"},[a("a",{attrs:{id:"cancel-comment-reply-link",href:"#",rel:"nofollow"},on:{click:function(e){e.preventDefault(),t.reply_show=0}}},[t._v("取消回复")])]),a("div",{staticClass:"layui-form-item"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.content,expression:"comment.content"}],staticClass:"layui-textarea",attrs:{rows:"5",cols:"30",name:"text",id:"textarea",placeholder:"嘿~ 大神，别默默的看了，快来点评一下吧",required:""},domProps:{value:t.comment.content},on:{input:function(e){e.target.composing||t.$set(t.comment,"content",e.target.value)}}})]),a("div",{staticClass:"layui-form-item layui-row layui-col-space5"},[a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.name,expression:"comment.name"}],staticClass:"layui-input",attrs:{type:"text",name:"author",id:"author",placeholder:"* 怎么称呼",required:""},domProps:{value:t.comment.name},on:{input:function(e){e.target.composing||t.$set(t.comment,"name",e.target.value)}}})]),a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.email,expression:"comment.email"}],staticClass:"layui-input",attrs:{type:"email",name:"mail",id:"mail","lay-verify":"email",placeholder:"* 邮箱(放心~会保密~.~)",required:""},domProps:{value:t.comment.email},on:{input:function(e){e.target.composing||t.$set(t.comment,"email",e.target.value)}}})]),a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.website,expression:"comment.website"}],staticClass:"layui-input",attrs:{type:"url",name:"url",id:"url","lay-verify":"url",placeholder:"http://您的主页"},domProps:{value:t.comment.website},on:{input:function(e){e.target.composing||t.$set(t.comment,"website",e.target.value)}}})])]),a("div",{staticClass:"layui-inline"},[a("button",{staticClass:"layui-btn layui-btn-normal",on:{click:function(a){return a.preventDefault(),t.post(e.pk)}}},[t._v("提交评论")])])]),a("div",{staticClass:"pl-list comment-children"},[a("ol",{staticClass:"comment-list"},[a("li",{staticClass:"comment-body comment-child comment-level-odd comment-odd"},t._l(e.replys,(function(i){return a("div",{key:i.pk,staticClass:"pl-dan comment-txt-box"},[t._m(5,!0),a("div",{staticClass:"t-u comment-author"},[a("strong",[a("a",{attrs:{href:i.website,rel:"external nofollow"},domProps:{textContent:t._s(i.name)}}),a("span",{staticClass:"layui-badge"})]),a("div",{staticClass:"t-s"},[a("p"),a("p",{domProps:{textContent:t._s(i.content)}}),a("p")]),a("span",{staticClass:"t-btn"},[a("a",{attrs:{href:"#",rel:"nofollow"},on:{click:function(e){e.preventDefault(),t.reply_show=i.pk}}},[t._v("回复")]),t._v(" "),a("span",{staticClass:"t-g"},[t._v(t._s(t._f("dateTimeFormat")(i.time)))])])]),a("form",{style:t.reply_show==i.pk?"":"display:none",attrs:{method:"post",id:"comment-form",role:"form"}},[t._m(6,!0),a("br"),a("div",{staticClass:"cancel-comment-reply"},[a("a",{attrs:{id:"cancel-comment-reply-link",href:"#",rel:"nofollow"},on:{click:function(e){e.preventDefault(),t.reply_show=0}}},[t._v("取消回复")])]),a("div",{staticClass:"layui-form-item"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.content,expression:"comment.content"}],staticClass:"layui-textarea",attrs:{rows:"5",cols:"30",name:"text",id:"textarea",placeholder:"嘿~ 大神，别默默的看了，快来点评一下吧",required:""},domProps:{value:t.comment.content},on:{input:function(e){e.target.composing||t.$set(t.comment,"content",e.target.value)}}})]),a("div",{staticClass:"layui-form-item layui-row layui-col-space5"},[a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.name,expression:"comment.name"}],staticClass:"layui-input",attrs:{type:"text",name:"author",id:"author",placeholder:"* 怎么称呼",required:""},domProps:{value:t.comment.name},on:{input:function(e){e.target.composing||t.$set(t.comment,"name",e.target.value)}}})]),a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.email,expression:"comment.email"}],staticClass:"layui-input",attrs:{type:"email",name:"mail",id:"mail","lay-verify":"email",placeholder:"* 邮箱(放心~会保密~.~)",required:""},domProps:{value:t.comment.email},on:{input:function(e){e.target.composing||t.$set(t.comment,"email",e.target.value)}}})]),a("div",{staticClass:"layui-col-md4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.website,expression:"comment.website"}],staticClass:"layui-input",attrs:{type:"url",name:"url",id:"url","lay-verify":"url",placeholder:"http://您的主页"},domProps:{value:t.comment.website},on:{input:function(e){e.target.composing||t.$set(t.comment,"website",e.target.value)}}})])]),a("div",{staticClass:"layui-inline"},[a("button",{staticClass:"layui-btn layui-btn-normal",on:{click:function(a){return a.preventDefault(),t.post(e.pk)}}},[t._v("提交评论")])])])])})),0)])])])})),0)])])])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("i",{staticClass:"layui-icon"},[t._v("")]),t._v(" Joker")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"response"}},[a("i",{staticClass:"layui-icon"},[t._v("")]),t._v(" 评论啦~")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t-p comment-author"},[a("img",{staticClass:"avatar",attrs:{src:"static/img/commenter.jpeg",alt:"wyzblog",width:"40",height:"40"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"response"}},[a("i",{staticClass:"layui-icon"},[t._v("")]),t._v(" 评论啦~")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"t-p comment-author"},[a("img",{staticClass:"avatar",attrs:{src:"static/img/commenter.jpeg",alt:"zbxm",width:"40",height:"40"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",{attrs:{id:"response"}},[a("i",{staticClass:"layui-icon"},[t._v("")]),t._v(" 评论啦~")])}],s=(a("b0c0"),a("1ae0")),n={name:"blog",data:function(){return{reply_show:0,blog:{comments:[]},hasPrevious:!1,hasNext:!1,comment:{reply_id:0,content:"",name:"",email:"",website:""}}},methods:{getBlog:function(t){var e=this;Object(s["a"])({url:"/api/detail/"+t+"/",method:"get"}).then((function(t){e.blog=t.data,document.title=e.blog.title,e.hasPrevious=void 0!=e.blog.previous_post.id,e.hasNext=void 0!=e.blog.next_post.id,e.comment.blog_id=e.blog.id,e.bus.$emit("ChangeBreadcrumb",[e.blog.type,"正文"])})).catch((function(t){console.log("blog error"),console.log(t)}))},post:function(t){if(this.comment.reply_id=t,!this.comment.content||!this.comment.name||!this.comment.email||!this.comment.website)return window.layui.layer.alert("所有表单都不能为空!",{icon:2}),!1;var e=/^[0-9a-zA-Z_.-]+[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+){1,2}$/;if(!e.test(this.comment.email))return window.layui.layer.alert("邮箱格式不正确！",{icon:2}),!1;var a=/^(https|http):\/\//;if(!a.test(this.comment.website))return window.layui.layer.alert("网站格式不正确！",{icon:2}),!1;var i=window.layui.layer.load(2);Object(s["a"])({url:"/api/comment/",method:"post",data:this.comment}).then((function(t){window.layui.layer.alert("评论成功!",{icon:1},(function(){location.reload()})),console.log(t)})).catch((function(t){console.log("message error"),console.dir(t)})),window.layui.layer.close(i)}},activated:function(){this.getBlog(this.$route.params.id)},mounted:function(){this.getBlog(this.$route.params.id)},beforeRouteUpdate:function(t,e,a){var i=this.layui.layer.load(1);this.getBlog(t.params.id),this.layui.layer.close(i),a()}},l=n,m=a("2877"),r=Object(m["a"])(l,i,o,!1,null,null,null);e["default"]=r.exports},b0c0:function(t,e,a){var i=a("83ab"),o=a("9bf2").f,s=Function.prototype,n=s.toString,l=/^\s*function ([^ (]*)/,m="name";!i||m in s||o(s,m,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=blog.2583a1e1.js.map